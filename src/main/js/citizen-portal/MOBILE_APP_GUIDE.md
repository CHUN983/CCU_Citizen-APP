# ğŸ“± Citizen Portal è¡Œå‹• APP é–‹ç™¼æŒ‡å—

> **å»ºç«‹æ—¥æœŸ**: 2025-11-27
> **ç‰ˆæœ¬**: 1.0.0
> **æŠ€è¡“**: Vue 3 + Capacitor 7 + Element Plus

## ğŸ“‹ ç›®éŒ„

1. [å°ˆæ¡ˆæ¦‚è¿°](#å°ˆæ¡ˆæ¦‚è¿°)
2. [æŠ€è¡“æ¶æ§‹](#æŠ€è¡“æ¶æ§‹)
3. [ç’°å¢ƒæº–å‚™](#ç’°å¢ƒæº–å‚™)
4. [é–‹ç™¼æŒ‡å—](#é–‹ç™¼æŒ‡å—)
5. [å»ºç½®èˆ‡éƒ¨ç½²](#å»ºç½®èˆ‡éƒ¨ç½²)
6. [åŠŸèƒ½æ¨¡çµ„](#åŠŸèƒ½æ¨¡çµ„)
7. [ç–‘é›£æ’è§£](#ç–‘é›£æ’è§£)

---

## ğŸ¯ å°ˆæ¡ˆæ¦‚è¿°

Citizen Portal æ˜¯ä¸€å€‹è·¨å¹³å°çš„å¸‚æ°‘æœå‹™æ‡‰ç”¨ç¨‹å¼,ä½¿ç”¨ Vue 3 + Capacitor æŠ€è¡“å¯¦ç¾:

- âœ… **ä¸€ä»½ç¨‹å¼ç¢¼,ä¸‰å€‹å¹³å°**: Web / iOS / Android
- âœ… **åŸç”ŸåŠŸèƒ½æ”¯æ´**: ç›¸æ©Ÿã€æª”æ¡ˆç³»çµ±ã€æ¨æ’­é€šçŸ¥
- âœ… **é«˜åº¦è¤‡ç”¨**: 95%+ Web ç¨‹å¼ç¢¼ç›´æ¥ç”¨æ–¼ APP
- âœ… **éŸ¿æ‡‰å¼è¨­è¨ˆ**: è‡ªé©æ‡‰ä¸åŒè¢å¹•å°ºå¯¸

---

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Vue 3 Application           â”‚
â”‚  (Vite + Vue Router + Pinia)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Capacitor 7   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”
â”‚  iOS   â”‚        â”‚ Androidâ”‚
â”‚  App   â”‚        â”‚  App   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæŠ€è¡“æ£§

| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Vue | 3.5.22 | å‰ç«¯æ¡†æ¶ |
| Vite | 7.1.7 | å»ºç½®å·¥å…· |
| Capacitor | 7.4.4 | åŸç”Ÿæ©‹æ¥ |
| Element Plus | 2.11.5 | UI å…ƒä»¶åº« |
| Pinia | 3.0.3 | ç‹€æ…‹ç®¡ç† |
| Vue Router | 4.6.3 | è·¯ç”±ç®¡ç† |

---

## ğŸ› ï¸ ç’°å¢ƒæº–å‚™

### 1ï¸âƒ£ åŸºç¤ç’°å¢ƒ

```bash
# Node.js 18+ (å·²å®‰è£)
node --version

# ç¢ºèª npm
npm --version
```

### 2ï¸âƒ£ Android é–‹ç™¼ç’°å¢ƒ

#### å®‰è£ Android Studio

1. ä¸‹è¼‰ Android Studio: https://developer.android.com/studio
2. å®‰è£å®Œæˆå¾Œ,é–‹å•Ÿ SDK Manager
3. å®‰è£ä»¥ä¸‹å…ƒä»¶:
   - Android SDK Platform 33 (æˆ–æ›´é«˜)
   - Android SDK Build-Tools
   - Android Emulator
   - Android SDK Platform-Tools

#### è¨­å®šç’°å¢ƒè®Šæ•¸

```bash
# Linux/macOS - åŠ å…¥åˆ° ~/.bashrc æˆ– ~/.zshrc
export ANDROID_HOME=$HOME/Android/Sdk
export PATH=$PATH:$ANDROID_HOME/platform-tools
export PATH=$PATH:$ANDROID_HOME/tools
export PATH=$PATH:$ANDROID_HOME/tools/bin

# é‡æ–°è¼‰å…¥
source ~/.bashrc  # or source ~/.zshrc
```

```cmd
REM Windows - è¨­å®šç³»çµ±ç’°å¢ƒè®Šæ•¸
ANDROID_HOME=C:\Users\YourUsername\AppData\Local\Android\Sdk
Path=%Path%;%ANDROID_HOME%\platform-tools;%ANDROID_HOME%\tools
```

#### é©—è­‰å®‰è£

```bash
# æª¢æŸ¥ Java (éœ€è¦ JDK 17+)
java -version

# æª¢æŸ¥ Android SDK
sdkmanager --list

# æª¢æŸ¥ ADB
adb version
```

### 3ï¸âƒ£ iOS é–‹ç™¼ç’°å¢ƒ (åƒ…é™ macOS)

#### å®‰è£ Xcode

```bash
# å¾ App Store å®‰è£ Xcode 15+
# å®‰è£å®Œæˆå¾Œå®‰è£å‘½ä»¤åˆ—å·¥å…·
xcode-select --install

# å®‰è£ CocoaPods
sudo gem install cocoapods

# é©—è­‰
pod --version
```

---

## ğŸ’» é–‹ç™¼æŒ‡å—

### å°ˆæ¡ˆçµæ§‹

```
citizen-portal/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ CameraUpload.vue    # ğŸ“¸ ç›¸æ©Ÿä¸Šå‚³å…ƒä»¶
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ camera.js           # ğŸ“· ç›¸æ©Ÿå·¥å…·å‡½å¼
â”‚   â”œâ”€â”€ views/                  # é é¢å…ƒä»¶
â”‚   â”œâ”€â”€ router/                 # è·¯ç”±è¨­å®š
â”‚   â”œâ”€â”€ store/                  # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ api/                    # API ä»‹æ¥
â”‚   â””â”€â”€ main.js                 # å…¥å£æª”æ¡ˆ
â”œâ”€â”€ android/                    # ğŸ¤– Android åŸç”Ÿå°ˆæ¡ˆ
â”œâ”€â”€ ios/                        # ğŸ iOS åŸç”Ÿå°ˆæ¡ˆ
â”œâ”€â”€ dist/                       # å»ºç½®è¼¸å‡º
â”œâ”€â”€ capacitor.config.json       # Capacitor è¨­å®š
â”œâ”€â”€ vite.config.js              # Vite è¨­å®š
â””â”€â”€ package.json                # å°ˆæ¡ˆè¨­å®š
```

### é–‹ç™¼æµç¨‹

#### 1. Web é–‹ç™¼æ¨¡å¼

```bash
cd /root/project/citizenApp/src/main/js/citizen-portal

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
npm run dev

# è¨ªå• http://localhost:5173
```

#### 2. Android é–‹ç™¼æ¨¡å¼

```bash
# åŒæ­¥ Web è®Šæ›´åˆ° Android
npm run cap:sync

# æˆ–è€…ç›´æ¥å»ºç½®ä¸¦é–‹å•Ÿ Android Studio
npm run android

# Android Studio é–‹å•Ÿå¾Œ:
# 1. ç­‰å¾… Gradle åŒæ­¥å®Œæˆ
# 2. é»æ“Š Run æŒ‰éˆ• (ç¶ è‰²æ’­æ”¾åœ–ç¤º)
# 3. é¸æ“‡æ¨¡æ“¬å™¨æˆ–å¯¦é«”è£ç½®
```

#### 3. iOS é–‹ç™¼æ¨¡å¼ (macOS)

```bash
# åŒæ­¥ Web è®Šæ›´åˆ° iOS
npm run cap:sync

# é–‹å•Ÿ Xcode
npm run ios

# Xcode é–‹å•Ÿå¾Œ:
# 1. é¸æ“‡æ¨¡æ“¬å™¨ (iPhone 14 Pro ç­‰)
# 2. é»æ“Š Run æŒ‰éˆ• (â–¶ï¸)
```

---

## ğŸ”§ åŠŸèƒ½æ¨¡çµ„

### ğŸ“¸ ç›¸æ©Ÿèˆ‡ç›¸ç‰‡ä¸Šå‚³

#### ä½¿ç”¨ç›¸æ©Ÿå·¥å…·å‡½å¼

```javascript
// src/utils/camera.js
import { takePicture, pickImages, compressImage } from '@/utils/camera';

// æ‹ç…§
const photo = await takePicture({ source: 'camera' });

// å¾ç›¸ç°¿é¸æ“‡
const photo = await takePicture({ source: 'gallery' });

// é¸æ“‡å¤šå¼µåœ–ç‰‡
const photos = await pickImages({ multiple: true });

// å£“ç¸®åœ–ç‰‡
const compressed = await compressImage(base64, 1920, 1920, 0.8);
```

#### ä½¿ç”¨ç›¸æ©Ÿå…ƒä»¶

```vue
<template>
  <CameraUpload
    :allow-multiple="true"
    :max-images="5"
    :compress="true"
    @update:images="handleImagesUpdate"
  />
</template>

<script setup>
import CameraUpload from '@/components/CameraUpload.vue';

function handleImagesUpdate(images) {
  console.log('é¸æ“‡çš„åœ–ç‰‡:', images);
  // images: [{ dataUrl, base64, format, size }, ...]
}
</script>
```

#### ç›¸æ©Ÿæ¬Šé™è™•ç†

Android éœ€è¦åœ¨ `AndroidManifest.xml` åŠ å…¥æ¬Šé™:

```xml
<!-- android/app/src/main/AndroidManifest.xml -->
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
```

iOS éœ€è¦åœ¨ `Info.plist` åŠ å…¥èªªæ˜:

```xml
<!-- ios/App/App/Info.plist -->
<key>NSCameraUsageDescription</key>
<string>æˆ‘å€‘éœ€è¦ä½¿ç”¨ç›¸æ©Ÿä¾†æ‹æ”ç…§ç‰‡</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>æˆ‘å€‘éœ€è¦å­˜å–ç›¸ç°¿ä¾†é¸æ“‡ç…§ç‰‡</string>
```

### ğŸ”” å…¶ä»– Capacitor æ’ä»¶

```bash
# å®‰è£æ›´å¤šæ’ä»¶
npm install @capacitor/geolocation        # GPS å®šä½
npm install @capacitor/push-notifications # æ¨æ’­é€šçŸ¥
npm install @capacitor/network           # ç¶²è·¯ç‹€æ…‹
npm install @capacitor/share             # åˆ†äº«åŠŸèƒ½
npm install @capacitor/haptics           # éœ‡å‹•å›é¥‹

# åŒæ­¥åˆ°åŸç”Ÿå¹³å°
npm run cap:sync
```

---

## ğŸš€ å»ºç½®èˆ‡éƒ¨ç½²

### Android APK å»ºç½®

#### 1. Debug ç‰ˆæœ¬ (æ¸¬è©¦ç”¨)

```bash
# åŒæ­¥æœ€æ–°ç¨‹å¼ç¢¼
npm run build
npx cap sync android

# é–‹å•Ÿ Android Studio
npx cap open android

# åœ¨ Android Studio:
# Build > Build Bundle(s) / APK(s) > Build APK(s)
# è¼¸å‡ºä½ç½®: android/app/build/outputs/apk/debug/app-debug.apk
```

#### 2. Release ç‰ˆæœ¬ (æ­£å¼ç™¼å¸ƒ)

##### ç”¢ç”Ÿç°½ç½²é‡‘é‘°

```bash
# ç”¢ç”Ÿ keystore (é¦–æ¬¡)
keytool -genkey -v -keystore citizen-portal.keystore \
  -alias citizen-portal -keyalg RSA -keysize 2048 -validity 10000

# è¨˜ä½ä»¥ä¸‹è³‡è¨Š:
# - Keystore å¯†ç¢¼
# - Key å¯†ç¢¼
# - Alias åç¨±
```

##### è¨­å®šç°½ç½²

å»ºç«‹ `android/key.properties`:

```properties
storePassword=ä½ çš„keystoreå¯†ç¢¼
keyPassword=ä½ çš„keyå¯†ç¢¼
keyAlias=citizen-portal
storeFile=/path/to/citizen-portal.keystore
```

ä¿®æ”¹ `android/app/build.gradle`:

```gradle
// åœ¨ android {} å€å¡Šå…§åŠ å…¥

def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file('key.properties')
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}

signingConfigs {
    release {
        keyAlias keystoreProperties['keyAlias']
        keyPassword keystoreProperties['keyPassword']
        storeFile file(keystoreProperties['storeFile'])
        storePassword keystoreProperties['storePassword']
    }
}

buildTypes {
    release {
        signingConfig signingConfigs.release
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
}
```

##### å»ºç½® Release APK

```bash
# ä½¿ç”¨ Gradle æŒ‡ä»¤
cd android
./gradlew assembleRelease

# è¼¸å‡ºä½ç½®: android/app/build/outputs/apk/release/app-release.apk
```

##### å»ºç½® AAB (Google Play)

```bash
cd android
./gradlew bundleRelease

# è¼¸å‡ºä½ç½®: android/app/build/outputs/bundle/release/app-release.aab
```

### iOS IPA å»ºç½® (macOS)

#### 1. Debug ç‰ˆæœ¬

```bash
# åŒæ­¥ç¨‹å¼ç¢¼
npm run build
npx cap sync ios

# é–‹å•Ÿ Xcode
npx cap open ios

# åœ¨ Xcode:
# 1. é¸æ“‡å¯¦é«”è£ç½®æˆ–æ¨¡æ“¬å™¨
# 2. Product > Run (âŒ˜R)
```

#### 2. Release ç‰ˆæœ¬ (App Store)

```bash
# åœ¨ Xcode:
# 1. è¨­å®š Bundle Identifier (com.citizenapp.portal)
# 2. è¨­å®šåœ˜éšŠç°½ç½²æ†‘è­‰
# 3. Product > Archive
# 4. ä¸Šå‚³åˆ° App Store Connect
```

---

## ğŸ¨ éŸ¿æ‡‰å¼è¨­è¨ˆå»ºè­°

### åµæ¸¬å¹³å°

```javascript
import { Capacitor } from '@capacitor/core';

// æª¢æŸ¥å¹³å°
const platform = Capacitor.getPlatform(); // 'web', 'ios', 'android'
const isNative = Capacitor.isNativePlatform();
const isIOS = platform === 'ios';
const isAndroid = platform === 'android';

// åœ¨ Vue å…ƒä»¶ä¸­
if (isNative) {
  // åŸç”Ÿ APP å°ˆå±¬é‚è¼¯
}
```

### CSS åª’é«”æŸ¥è©¢

```css
/* æ‰‹æ©Ÿç‰ˆ */
@media (max-width: 768px) {
  .container {
    padding: 12px;
  }
}

/* å¹³æ¿ç‰ˆ */
@media (min-width: 769px) and (max-width: 1024px) {
  .container {
    padding: 20px;
  }
}

/* æ¡Œé¢ç‰ˆ */
@media (min-width: 1025px) {
  .container {
    padding: 32px;
  }
}
```

---

## ğŸ› ç–‘é›£æ’è§£

### Android å¸¸è¦‹å•é¡Œ

#### å•é¡Œ: Gradle åŒæ­¥å¤±æ•—

```bash
# æ¸…ç† Gradle å¿«å–
cd android
./gradlew clean

# é‡æ–°åŒæ­¥
npm run cap:sync
```

#### å•é¡Œ: SDK ç‰ˆæœ¬éŒ¯èª¤

æª¢æŸ¥ `android/app/build.gradle`:

```gradle
android {
    compileSdkVersion 33
    defaultConfig {
        minSdkVersion 22
        targetSdkVersion 33
    }
}
```

#### å•é¡Œ: ç„¡æ³•å­˜å–ç›¸æ©Ÿ

ç¢ºèªå·²åŠ å…¥æ¬Šé™åˆ° `AndroidManifest.xml`,ä¸¦åœ¨åŸ·è¡Œæ™‚è«‹æ±‚æ¬Šé™ã€‚

### iOS å¸¸è¦‹å•é¡Œ

#### å•é¡Œ: CocoaPods å®‰è£å¤±æ•—

```bash
# æ›´æ–° CocoaPods
sudo gem install cocoapods

# é‡æ–°å®‰è£ pods
cd ios/App
pod install
```

#### å•é¡Œ: ç°½ç½²éŒ¯èª¤

åœ¨ Xcode çš„ Signing & Capabilities åˆ†é :
1. é¸æ“‡æ­£ç¢ºçš„é–‹ç™¼åœ˜éšŠ
2. ç¢ºèª Bundle Identifier å”¯ä¸€
3. é¸æ“‡é©ç•¶çš„ Provisioning Profile

### ä¸€èˆ¬å•é¡Œ

#### å•é¡Œ: Hot Reload ä¸å·¥ä½œ

```bash
# åœæ­¢é–‹ç™¼ä¼ºæœå™¨
# åˆªé™¤å¿«å–
rm -rf node_modules .vite dist

# é‡æ–°å®‰è£
npm install
npm run dev
```

#### å•é¡Œ: Capacitor æ’ä»¶æœªåŒæ­¥

```bash
# å®Œæ•´é‡æ–°åŒæ­¥
npm run build
npx cap sync
```

---

## ğŸ“š åƒè€ƒè³‡æº

- [Capacitor å®˜æ–¹æ–‡ä»¶](https://capacitorjs.com/docs)
- [Vue 3 å®˜æ–¹æ–‡ä»¶](https://vuejs.org/)
- [Element Plus æ–‡ä»¶](https://element-plus.org/)
- [Android é–‹ç™¼è€…æ–‡ä»¶](https://developer.android.com/)
- [iOS é–‹ç™¼è€…æ–‡ä»¶](https://developer.apple.com/)

---

## ğŸ¯ NPM æŒ‡ä»¤å¿«é€Ÿåƒè€ƒ

```bash
# Web é–‹ç™¼
npm run dev              # å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
npm run build            # å»ºç½® Web ç‰ˆæœ¬
npm run preview          # é è¦½å»ºç½®çµæœ

# Capacitor åŒæ­¥
npm run cap:sync         # å»ºç½®ä¸¦åŒæ­¥åˆ°åŸç”Ÿå¹³å°

# é–‹å•ŸåŸç”Ÿ IDE
npm run android          # å»ºç½®ä¸¦é–‹å•Ÿ Android Studio
npm run ios              # å»ºç½®ä¸¦é–‹å•Ÿ Xcode (macOS only)
```

---

## âœ… æª¢æŸ¥æ¸…å–®

### é–‹ç™¼å‰
- [ ] Node.js 18+ å·²å®‰è£
- [ ] Android Studio å·²å®‰è£ä¸¦è¨­å®šå¥½ SDK
- [ ] (macOS) Xcode å’Œ CocoaPods å·²å®‰è£
- [ ] ç’°å¢ƒè®Šæ•¸å·²è¨­å®š

### å»ºç½®å‰
- [ ] æ‰€æœ‰åŠŸèƒ½åœ¨ Web ç‰ˆæ¸¬è©¦é€šé
- [ ] å·²æ¸¬è©¦éŸ¿æ‡‰å¼ä½ˆå±€
- [ ] å·²è™•ç†æ‰€æœ‰å¹³å°ç‰¹å®šé‚è¼¯
- [ ] æ¬Šé™èªªæ˜å·²åŠ å…¥ AndroidManifest.xml å’Œ Info.plist

### ç™¼å¸ƒå‰
- [ ] App åœ–ç¤ºå’Œå•Ÿå‹•ç•«é¢å·²è¨­å®š
- [ ] ç‰ˆæœ¬è™Ÿå·²æ›´æ–°
- [ ] å·²å»ºç½®ä¸¦æ¸¬è©¦ Release ç‰ˆæœ¬
- [ ] å·²æª¢æŸ¥ App å¤§å°å’Œæ•ˆèƒ½
- [ ] å·²æº–å‚™å¥½æ‡‰ç”¨å•†åº—ç´ æ

---

**ğŸ‰ æ­å–œ!æ‚¨å·²æº–å‚™å¥½é–‹ç™¼ Citizen Portal è¡Œå‹• APP!**

å¦‚æœ‰å•é¡Œ,è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶æˆ–ç¤¾ç¾¤è«–å£‡ã€‚

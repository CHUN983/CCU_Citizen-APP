[pytest]
# Pytest 配置文件
# 專案: citizenApp
# 用途: 配置 pytest 測試執行參數

# 測試目錄
testpaths = src/test

# Python 搜尋路徑
pythonpath = . src/main/python

# 測試文件命名模式
python_files = test_*.py *_test.py

# 測試類別命名模式
python_classes = Test* *Tests

# 測試函數命名模式
python_functions = test_*

# 輸出選項
addopts =
    # 詳細輸出
    -v
    # 顯示測試覆蓋率
    --cov=src/main/python
    # 覆蓋率報告格式
    --cov-report=html:htmlcov
    --cov-report=term-missing
    # 顯示失敗的測試細節
    --tb=short
    # 顯示測試執行時間
    --durations=10
    # 警告處理
    -W ignore::DeprecationWarning
    # 顯示打印輸出
    -s
    # 啟用異步測試支持
    --asyncio-mode=auto

# 標記註冊
markers =
    unit: 單元測試標記
    integration: 整合測試標記
    api: API 測試標記
    auth: 認證相關測試
    opinion: 意見系統測試
    moderation: 審核系統測試
    media: 媒體系統測試
    slow: 執行時間較長的測試
    smoke: 冒煙測試

# 最小覆蓋率要求
[coverage:run]
source = src/main/python
omit =
    */tests/*
    */test_*
    */__pycache__/*
    */venv/*
    */node_modules/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False
